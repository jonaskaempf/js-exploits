# Build

```bash
$ curl https://queue.taskcluster.net/v1/task/RMECPvD9ShqixX2VxGulzQ/runs/0/artifacts/public/build/mozjs-61.0.0.tar.bz2 | bunzip2 | tar x

# - or -

$ curl https://queue.taskcluster.net/v1/task/YFwv3W_pRD6ouz_Z768lPg/runs/0/artifacts/public/build/mozjs-60.0.3.tar.bz2 | bunzip2 | tar x

$ cd mosjs-60.0.3
$ git apply haxxor.diff
$ mkdir -p js/src/build_OPT.OBJ
$ cd js/src/build_OPT.OBJ
$ env AUTOCONF=${PATH_TO_AUTOCONF_2.13} CC=clang CXX=clang++ ../configure
$ make -j4
```

# References

[SpiderMonkey JS Shell builtins](https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/Introduction_to_the_JavaScript_shell)

[Similar exploit](https://phoenhex.re/2017-06-21/firefox-structuredclone-refleak)

[Firefox/SpiderMonkey Internals](http://phrack.org/issues/69/14.html)

